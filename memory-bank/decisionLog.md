# Журнал решений проекта EasyTalk

## Архитектурные решения

[2025-06-06 07:21:14] - **Выбор многослойной архитектуры**

- Решение: Использовать четырехслойную архитектуру (домен, репозитории, сервисы, API)
- Обоснование: Разделение ответственности, гибкость при расширении функционала, тестируемость
- Альтернативы: Монолитный подход, MVC

[2025-06-06 07:05:44] - **Миграция с Flask на FastAPI**

- Решение: Полный переход с Flask на FastAPI

- Обоснование: Асинхронность, автоматическая документация API, типизация и валидация данных с помощью Pydantic
- Альтернативы: Сохранить Flask, использовать Flask-RESTful

[2025-06-06 07:21:14] - **Firebase для аутентификации и хранения данных**

- Решение: Использовать Firebase Admin SDK для аутентификации и Firestore для хранения
- Обоснование: Готовая инфраструктура для аутентификации, масштабируемое NoSQL хранилище, интеграция с iOS-клиентом
- Альтернативы: JWT + PostgreSQL, SQLAlchemy + SQLite

## Технические решения

[2025-06-06 07:13:52] - **Использование фабрики для Firebase**

- Решение: Создать централизованный модуль для инициализации Firebase
- Обоснование: Избегание дублирования кода, корректная обработка повторной инициализации
- Альтернативы: Инициализация в main.py, глобальный синглтон

[2025-06-06 07:08:22] - **Инъекция зависимостей в сервисы**

- Решение: Передавать репозитории в конструкторы сервисов
- Обоснование: Лучшая тестируемость, гибкость, соблюдение принципа инверсии зависимостей
- Альтернативы: Глобальные объекты, инициализация внутри сервисов

## Бизнес-логика

[2025-06-06 07:21:14] - **Реализация Perfect Streak**

- Решение: Проверять серию из 10 правильных ответов в SessionService
- Обоснование: Централизация бизнес-логики в сервисном слое
- Альтернативы: Проверка на клиенте, отдельный сервис достижений

[2025-06-06 07:21:14] - **Реализация Weekly Fifty**

- Решение: Агрегировать данные за неделю в ProgressService
- Обоснование: Эффективный расчет на сервере с доступом к полной истории
- Альтернативы: Scheduled Cloud Function, расчет на клиенте
